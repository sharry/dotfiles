{ ... }:
let
	enableLanguages = langs: builtins.listToAttrs (map (lang: {
		name = lang;
		value = {
			enable = true;
			lsp.enable = true;
			treesitter.enable = true;
		};
	}) langs);

	silentNormalKeymap = { key, action }: {
		mode = "n";
		silent = true;
		inherit key;
		inherit action;
	};
in
	{
	programs.nvf = {
		
		enable = true;
		
		settings.vim = {

			lsp = {
				enable = true;
				formatOnSave = true;
				lightbulb.enable = true;
			};

			lineNumberMode = "number";
			hideSearchHighlight = true;	

			spellcheck = {
				enable = true;
				languages = ["en"];
			};
			
			options = {
				wrap = false;
				smoothscroll = true;
			};

			keymaps = [
				(silentNormalKeymap { key = "<leader>e"; action = ":Neotree toggle<CR>"; })
				(silentNormalKeymap { key = "<leader>c"; action = ":Copilot toggle<CR>"; })
				(silentNormalKeymap { key = "<leader><space>"; action = ":Telescope git_files<CR>"; })
			];

			theme = {
				enable = true;
				style = "mocha";
				transparent = true;
				name = "catppuccin";
			};

			ui = {
				colorizer.enable = true;
			};

			filetree.neo-tree = {
				enable = true;
			};

			statusline.lualine = {
				enable = true;
			};

			telescope.enable = true;

			assistant.copilot = {
				enable = true;
				cmp.enable = true;
			};

			comments.comment-nvim.enable = true;

			useSystemClipboard = true;

			treesitter.enable = true;

			languages = enableLanguages [
				"ts"
				"nix"
				"csharp"
			];

			autocomplete.nvim-cmp = {
				enable = true;
			};

		};
	};
}
